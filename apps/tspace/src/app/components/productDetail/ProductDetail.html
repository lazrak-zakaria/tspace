<div class="product-detail-container" *ngIf="product">
    <!-- Breadcrumb -->
    <div class="container">
      <div class="breadcrumb">
        <a (click)="goBack()">‚Üê Back to Products</a>
        <span>/</span>
        <span>{{ product.category }}</span>
        <span>/</span>
        <span>{{ product.name }}</span>
      </div>
    </div>
  
    <!-- Product Main Section -->
    <div class="container">
      <div class="product-main">
        <!-- Image Gallery -->
        <div class="image-gallery">
          <div class="main-image">
            <img [src]="selectedImage" [alt]="product.name">
            <span class="discount-badge" *ngIf="product.discount">-{{ product.discount }}%</span>
          </div>
          <div class="thumbnail-images">
            <div 
              class="thumbnail" 
              *ngFor="let img of product.images"
              [class.active]="img === selectedImage"
              (click)="selectImage(img)">
              <img [src]="img" [alt]="product.name">
            </div>
          </div>
        </div>
  
        <!-- Product Info -->
        <div class="product-info-section">
          <div class="product-category-badge">{{ product.category }}</div>
          <h1 class="product-title">{{ product.name }}</h1>
  
          <!-- Rating and Sales -->
          <div class="rating-section">
            <div class="stars">
              <span *ngFor="let filled of getStarArray(product.rating)" 
                    [class.filled]="filled">‚òÖ</span>
            </div>
            <span class="rating-text">{{ product.rating }} ({{ product.reviews.length }} reviews)</span>
            <span class="sales-text">{{ product.sales }} sold</span>
          </div>
  
          <!-- Price -->
          <div class="price-section">
            <div class="current-price">${{ product.price.toFixed(2) }}</div>
            <div class="original-price" *ngIf="product.originalPrice">
              ${{ product.originalPrice.toFixed(2) }}
            </div>
            <div class="savings" *ngIf="product.originalPrice">
              Save ${{ (product.originalPrice - product.price).toFixed(2) }}
            </div>
          </div>
  
          <!-- Stock Status -->
          <div class="stock-status">
            <span class="in-stock" *ngIf="product.inStock">
              ‚úì In Stock ({{ product.stockCount }} available)
            </span>
            <span class="out-of-stock" *ngIf="!product.inStock">
              ‚úó Out of Stock
            </span>
          </div>
  
          <!-- Quantity Selector -->
          <div class="quantity-section">
            <label>Quantity:</label>
            <div class="quantity-controls">
              <button (click)="decrementQuantity()" [disabled]="quantity <= 1">-</button>
              <input type="number" [(ngModel)]="quantity" [min]="1" [max]="product.stockCount" readonly>
              <button (click)="incrementQuantity()" [disabled]="quantity >= product.stockCount">+</button>
            </div>
          </div>
  
          <!-- Action Buttons -->
          <div class="action-buttons">
            <button class="btn-add-cart" (click)="addToCart()" [disabled]="!product.inStock">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
              </svg>
              Add to Cart
            </button>
            <button class="btn-buy-now" (click)="buyNow()" [disabled]="!product.inStock">
              Buy Now
            </button>
            <button class="btn-wishlist" (click)="addToWishlist()">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
              </svg>
            </button>
          </div>
  
          <!-- Quick Info -->
          <div class="quick-info">
            <div class="info-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <span>Free Shipping</span>
            </div>
            <div class="info-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
              </svg>
              <span>2 Year Warranty</span>
            </div>
            <div class="info-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
              </svg>
              <span>30-Day Returns</span>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Tabs Section -->
      <div class="tabs-section">
        <div class="tabs-header">
          <button 
            [class.active]="activeTab === 'description'"
            (click)="setActiveTab('description')">
            Description
          </button>
          <button 
            [class.active]="activeTab === 'specifications'"
            (click)="setActiveTab('specifications')">
            Specifications
          </button>
          <button 
            [class.active]="activeTab === 'reviews'"
            (click)="setActiveTab('reviews')">
            Reviews ({{ product.reviews.length }})
          </button>
        </div>
  
        <div class="tabs-content">
          <!-- Description Tab -->
          <div class="tab-pane" *ngIf="activeTab === 'description'">
            <h3>Product Description</h3>
            <p>{{ product.description }}</p>
            
            <h4>Key Features</h4>
            <ul class="features-list">
              <li *ngFor="let feature of product.features">{{ feature }}</li>
            </ul>
          </div>
  
          <!-- Specifications Tab -->
          <div class="tab-pane" *ngIf="activeTab === 'specifications'">
            <h3>Technical Specifications</h3>
            <table class="specs-table">
              <tr *ngFor="let spec of product.specifications | keyvalue">
                <td class="spec-label">{{ spec.key }}</td>
                <td class="spec-value">{{ spec.value }}</td>
              </tr>
            </table>
          </div>
  
          <!-- Reviews Tab -->
          <div class="tab-pane" *ngIf="activeTab === 'reviews'">
            <h3>Customer Reviews</h3>
            <div class="reviews-list">
              <div class="review-card" *ngFor="let review of product.reviews">
                <div class="review-header">
                  <div class="reviewer-info">
                    <div class="reviewer-avatar">{{ review.userName.charAt(0) }}</div>
                    <div>
                      <div class="reviewer-name">{{ review.userName }}</div>
                      <div class="review-date">{{ review.date }}</div>
                    </div>
                  </div>
                  <div class="review-stars">
                    <span *ngFor="let filled of getStarArray(review.rating)" 
                          [class.filled]="filled">‚òÖ</span>
                  </div>
                </div>
                <div class="review-comment">{{ review.comment }}</div>
                <div class="review-footer">
                  <button class="helpful-btn" (click)="markReviewHelpful(review.id)">
                    üëç Helpful ({{ review.helpful }})
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>